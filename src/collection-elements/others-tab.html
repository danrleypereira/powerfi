<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/collectar-elements/collectar-list/collectar-list.html">

<link rel="import" href="../app-elements/app-icons.html">
<link rel="import" href="./search-component.html">

<dom-module id="others-tab">
  <template>
    <style>
      :host {
        display: block;
        padding: 20px 40px;
      }
      p {
        font-family: 'Comfortaa', cursive !important;
        opacity: 0.7;
      }
      .tab-heading {
        margin: 0;
        font-size: 4rem;
      }
      .block {
        display: flex;
        align-items: center;
      }
      .tab-text {
        flex: 1;
        margin-right: 40px;
      }
      .tab-icon {
        background: url('/images/others.png');
        background-size: cover;
        border-radius: 50%;
        overflow: hidden;
        width: 200px;
        height: 200px;
        margin: 20px 60px 0 10px;
      }
      @media screen and (max-width: 960px) {
        .tab-heading {
          font-size: 3.5rem;
        }
      }
      @media screen and (max-width: 800px) {
        h1 {
          font-size: 1.8rem;
        }
      }
      @media screen and (max-width: 660px) {
        :host {
          display: block;
          padding: 20px 0;
        }
        .block {
          display: block;
        }
        .tab-text {
          margin: 0 20px;;
        }
        .tab-icon {
          width: 100px;
          height: 100px;
          margin: 20px auto;
          display: block;
        }
        .tab-heading {
          font-size: 2.3rem;
            text-align: center;
        }
        h1 {
          font-size: 1.3rem;
        }
      }
    </style>

    <div class="content">
      <h1 class="tab-heading">Outros</h1>
      <div class="block">
        <div class="tab-icon">
        </div>
        <div class="tab-text">
          <p>
            O acervo conta ainda com um conjunto de objetos pessoais, peças de mobiliário, objetos de inspiração
            ou religiosos, utensílios domésticos ou de trabalho e demais categorias, somando um total de 182 peças
            que remontam parte do atelier, da casa e dos costumes de Milton Ribeiro.
          </p>
        </div>
      </div>
      <collectar-list id="list" project-id="{{projectId}}" query="{{_buildQuery(filter)}}"
        server="https://acervo.miltonribeiro.org/api" on-show-item="showItem">
      </collectar-list>
    </div>
    
  </template>

  <script>
    class OthersTab extends Polymer.Element {
      static get is() { return 'others-tab'; }
      static get properties() {
        return {
          projectId: String,
          filter: {
            type: Object,
            value() {
              return {};
            } 
          }
        };
      }

      _buildQuery(f) {
        const taxonomies = f.taxonomies || [];
        const filter = JSON.stringify(f.filter || {});
        taxonomies.push('5bca179ce01f5ddedbab217e', '5bca26cce01f5ddedbab2186', '5bca27e3e01f5ddedbab218b', '5bca2a0be01f5ddedbab2198', '5bca306984a76be6c51b33aa', '5bce0bd80c9ea2ff19fb7069', '5bce11980c9ea2ff19fb706b', '5bce24740c9ea2ff19fb707f');
        return `?filter=${filter}&taxonomies=${taxonomies}&`;
      }

      showItem(e) {
        this.dispatchEvent(new CustomEvent('show-item', { detail: e.detail } ));
      }
    }

    window.customElements.define(OthersTab.is, OthersTab);
  </script>
</dom-module>
